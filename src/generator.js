const marked = require('marked');

const generator = {
  /**
   * converts presentation steps into a html string
   *
   * accepts an array of steps
   * returns a html string
   * @param {array} steps
   */
  generate(steps) {
    const stepsHtml = steps.reduce((html, step, index) => {
      const attrHtml = generateAttributeString(step.attributes);
      const contentHtml = marked(step.content).replace(/<!--.+-->\n/, ''); // convert to html and remove comments
      const stepHtml = stepTemplate
        .replace('{{ id }}', `id-${index}`) // TODO: step id, from h1/h2?
        .replace('{{ attributes }}', attrHtml)
        .replace('{{ content }}', contentHtml);

      html += stepHtml;

      return html;
    }, '');

    // merge html with template
    const html = htmlTemplate.replace('{{ steps }}', stepsHtml);

    return html;
  }
};

module.exports = generator;

const generateAttributeString = attributes => {
  let string = '';

  for (const attr in attributes) {
    if (attributes.hasOwnProperty(attr)) {
      const value = attributes[attr];
      string += `data-${attr}="${value}" `;
    }
  }

  return string;
};

const stepTemplate = `
<div id="{{ id }}" class="step" {{ attributes }}>
{{ content }}
</div>`;

const htmlTemplate = `
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>{{ title }}</title>

    <style type="text/css">#ing b,a{-webkit-transition:.5s;-moz-transition:.5s;-ms-transition:.5s;-o-transition:.5s}#big,#tiny,.hint{text-align:center}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1;font-family:'PT Sans',sans-serif;min-height:740px;background:#d7d7d7;background:-webkit-gradient(radial,50% 50%,0,50% 50%,500,from(#f0f0f0),to(#bebebe));background:-webkit-radial-gradient(#f0f0f0,#bebebe);background:-moz-radial-gradient(#f0f0f0,#bebebe);background:-ms-radial-gradient(#f0f0f0,#bebebe);background:-o-radial-gradient(#f0f0f0,#bebebe);background:radial-gradient(#f0f0f0,#bebebe)}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}b,strong{font-weight:700}em,i{font-style:italic}a{color:inherit;text-decoration:none;padding:0 .1em;background:rgba(255,255,255,.5);text-shadow:-1px -1px 2px rgba(100,100,100,.9);border-radius:.2em;transition:.5s}a:focus,a:hover{background:rgba(255,255,255,1);text-shadow:-1px -1px 2px rgba(100,100,100,.5)}.fallback-message{font-family:sans-serif;line-height:1.3;width:780px;padding:10px 10px 0;margin:20px auto;border:1px solid #E4C652;border-radius:10px;background:#EEDC94}.fallback-message p{margin-bottom:10px}.impress-supported .fallback-message{display:none}.step{position:relative;width:900px;padding:40px;margin:20px auto;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-o-box-sizing:border-box;box-sizing:border-box;font-family:'PT Serif',georgia,serif;font-size:48px;line-height:1.5}.impress-enabled .step{margin:0;opacity:.3;-webkit-transition:opacity 1s;-moz-transition:opacity 1s;-ms-transition:opacity 1s;-o-transition:opacity 1s;transition:opacity 1s}.impress-enabled .step.active{opacity:1}.slide{display:block;width:900px;height:700px;padding:40px 60px;background-color:#fff;border:1px solid rgba(0,0,0,.3);border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.1);color:#666;text-shadow:0 2px 2px rgba(0,0,0,.1);font-family:'Open Sans',Arial,sans-serif;font-size:30px;line-height:36px;letter-spacing:-1px}#ing,#tiny{width:500px}#big,#imagination{width:600px}.slide q{display:block;font-size:50px;line-height:72px;margin-top:100px}.slide q strong{white-space:nowrap}#title{padding:0}#title .try{font-size:64px;position:absolute;top:-.5em;left:1.5em;-webkit-transform:translateZ(20px);-moz-transform:translateZ(20px);-ms-transform:translateZ(20px);-o-transform:translateZ(20px);transform:translateZ(20px)}#title h1{font-size:180px;-webkit-transform:translateZ(50px);-moz-transform:translateZ(50px);-ms-transform:translateZ(50px);-o-transform:translateZ(50px);transform:translateZ(50px)}#title .footnote{font-size:32px}#big{font-size:60px;line-height:1}#big b,#big strong{display:block;font-size:250px;line-height:250px}#big .thoughts{font-size:90px;line-height:150px}#ing b{display:inline-block;transition:.5s}#ing.present .positioning{-webkit-transform:translateY(-10px);-moz-transform:translateY(-10px);-ms-transform:translateY(-10px);-o-transform:translateY(-10px);transform:translateY(-10px)}#ing.present .rotating{-webkit-transform:rotate(-10deg);-moz-transform:rotate(-10deg);-ms-transform:rotate(-10deg);-o-transform:rotate(-10deg);transform:rotate(-10deg);-webkit-transition-delay:.25s;-moz-transition-delay:.25s;-ms-transition-delay:.25s;-o-transition-delay:.25s;transition-delay:.25s}#ing.present .scaling{-webkit-transform:scale(.7);-moz-transform:scale(.7);-ms-transform:scale(.7);-o-transform:scale(.7);transform:scale(.7);-webkit-transition-delay:.5s;-moz-transition-delay:.5s;-ms-transition-delay:.5s;-o-transition-delay:.5s;transition-delay:.5s}#imagination .imagination{font-size:78px}#source{width:700px;padding-bottom:300px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAAEYCAMAAACwUBm+AAAAAXNSR0IArs4c6QAAAKtQTFRFsAAAvbWSLUUrLEQqY1s8UYJMqJ1vNTEgOiIdIzYhjIFVLhsXZ6lgSEIsP2U8JhcCVzMsSXZEgXdOO145XJdWOl03LzAYMk4vSXNExr+hwcuxRTs1Qmk+RW9Am49eFRANQz4pUoNMQWc+OSMDTz0wLBsCNVMxa2NBOyUDUoNNSnlEWo9VRGxAVzYFl6tXCggHbLNmMUIcHhwTXkk5f3VNRT8wUT8xAAAACQocRBWFFwAAAAF0Uk5TAEDm2GYAAAPCSURBVHja7d3JctNAFIZRMwRCCGEmzPM8z/D+T8bu/ptbXXJFdij5fMt2Wuo+2UgqxVmtttq5WVotLzBgwIABAwYMGDCn0qVqbo69psPqVpWx+1XG5iaavF8wYMCAAQMGDBgwi4DJ6Y6qkxB1HNlcN3a92gbR5P2CAQMGDBgwYMCAWSxMlrU+UY5yu2l9okfV4bAxUVbf7TJnAwMGDBgwYMCAAbMLMHeqbGR82Zy+VR1Ht81nVca6R+UdTLaU24Ruzd3qM/e4yjnAgAEDBgwYMGDA7AJMd1l/3NRdVGcj3eX/2WEhCmDGxnM7yqygu8XIPjJj8iN/MGDAgAEDBgwYMAuDGb8q0RGlLCHLv1t9qDKWn3vdNHVuEI6HPaxO9Jo3GDBgwIABAwYMmIXBdC9ShGgMk+XnkXUeuGcsP/e1+lhNnZsL/G5Vs3OAAQMGDBgwYMCAWSxMR3SzOmraG5atdy9wZKzb+vg16qyqe2FltbnAgAEDBgwYMGDALAxmTJSuN3WA76rnVca6GTnemGN1WoEBAwYMGDBgwIBZGMxUomy4+xO899V4LAg5Xnc2MGDAgAEDBgwYMGA218Wq+2K1LDqvY9xZu8zN8fICdM6btYABAwYMGDBgwIABMzfH0+pGU5afze2tXebmeAfVz+p8BQYMGDBgwIABAwbMPBzZ+oWmfJrln1273FhkbHzee9WWbw7AgAEDBgwYMGDALAKm43hcdctKgblcPamOhuXnXlY5Xs6bsW4FGyQCAwYMGDBgwIABswiYMceZKgvMo+h8mrHLTdn676rj+FEFoTtHd8MwOxEYMGDAgAEDBgyYRcBM5UhXqiymW3R3c9ARhWO/OmjqfjVZy+xEYMCAAQMGDBgwYBYG073OnCV0RFNhMhaOa9WfKmOB6XjHMN1tQmaAAQMGDBgwYMCA2VWY7vXjz1U4croAzgPztwIDBgwYMGDAgAEDZhswh035NBw59Dww3RgYMGDAgAEDBgwYMJuD6f4tXT7NUqfCdBvZLkxXdgQGDBgwYMCAAQNmt2DGj8WzwAfV/w7T/aq7mxwwYMCAAQMGDBgwuwqTOo7uTwTngflSzQ3TdaJvAwEDBgwYMGDAgAED5gSvgbyo5oHZ4Pc+gwEDBgwYMGDAgAEzhOm+5G0qTGaAAQMGDBgwYMCAAXNaMOcnls3tNwWm+zRzp54NDBgwYMCAAQMGDJh5YNL36k1TLuGvVq+qnKMbS5n7tulT9asCAwYMGDBgwIABA2ZumKuztLnjgQEDBgwYMGDAgNl5mH/4/ltKA6vBNAAAAABJRU5ErkJggg==);background-position:bottom right;background-repeat:no-repeat}#source q{font-size:60px}#its-in-3d p{-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;-o-transform-style:preserve-3d;transform-style:preserve-3d}#its-in-3d b,#its-in-3d span{display:inline-block;-webkit-transform:translateZ(40px);-moz-transform:translateZ(40px);-ms-transform:translateZ(40px);-o-transform:translateZ(40px);transform:translateZ(40px);-webkit-transition:.5s;-moz-transition:.5s;-ms-transition:.5s;-o-transition:.5s;transition:.5s}#overview,.hint,body.impress-mouse-timeout div#impress-toolbar{display:none}#its-in-3d .have{-webkit-transform:translateZ(-40px);-moz-transform:translateZ(-40px);-ms-transform:translateZ(-40px);-o-transform:translateZ(-40px);transform:translateZ(-40px)}#its-in-3d .you{-webkit-transform:translateZ(20px);-moz-transform:translateZ(20px);-ms-transform:translateZ(20px);-o-transform:translateZ(20px);transform:translateZ(20px)}#its-in-3d .noticed{-webkit-transform:translateZ(-40px);-moz-transform:translateZ(-40px);-ms-transform:translateZ(-40px);-o-transform:translateZ(-40px);transform:translateZ(-40px)}#its-in-3d .its{-webkit-transform:translateZ(60px);-moz-transform:translateZ(60px);-ms-transform:translateZ(60px);-o-transform:translateZ(60px);transform:translateZ(60px)}#its-in-3d .in{-webkit-transform:translateZ(-10px);-moz-transform:translateZ(-10px);-ms-transform:translateZ(-10px);-o-transform:translateZ(-10px);transform:translateZ(-10px)}#its-in-3d .footnote{font-size:32px;-webkit-transform:translateZ(-10px);-moz-transform:translateZ(-10px);-ms-transform:translateZ(-10px);-o-transform:translateZ(-10px);transform:translateZ(-10px)}#its-in-3d.present b,#its-in-3d.present span{-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);-o-transform:translateZ(0);transform:translateZ(0)}.impress-on-overview .step{opacity:1;cursor:pointer}.impress-enabled div#impress-toolbar{position:fixed;right:1px;bottom:1px;opacity:.6}.impress-enabled div#impress-toolbar>span{margin-right:10px}body.impress-mouse-timeout{cursor:none}.hint{position:fixed;left:0;right:0;bottom:200px;background:rgba(0,0,0,.5);color:#EEE;font-size:50px;padding:20px;z-index:100;opacity:0;-webkit-transform:translateY(400px);-moz-transform:translateY(400px);-ms-transform:translateY(400px);-o-transform:translateY(400px);transform:translateY(400px);-webkit-transition:opacity 1s,-webkit-transform .5s 1s;-moz-transition:opacity 1s,-moz-transform .5s 1s;-ms-transition:opacity 1s,-ms-transform .5s 1s;-o-transition:opacity 1s,-o-transform .5s 1s;transition:opacity 1s,transform .5s 1s}.impress-enabled .hint{display:block}.impress-on-bored .hint{opacity:1;-webkit-transform:translateY(0);-moz-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0);-webkit-transition:opacity 1s 5s,-webkit-transform .5s 4.5s;-moz-transition:opacity 1s 5s,-moz-transform .5s 4.5s;-ms-transition:opacity 1s 5s,-ms-transform .5s 4.5s;-o-transition:opacity 1s 5s,-o-transform .5s 4.5s;transition:opacity 1s 5s,transform .5s 4.5s}.impress-enabled{pointer-events:none}.impress-enabled #impress,.impress-enabled #impress-toolbar{pointer-events:auto}</style>
    <style type="text/css">
      {{ css }}
    </style>
    
    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
</head>

<body class="impress-not-supported">
<div id="impress">
{{ steps }}
</div>
<!-- FIX THIS
<script>
/**
 * impress.js
 *
 * impress.js is a presentation tool based on the power of CSS3 transforms and transitions
 * in modern browsers and inspired by the idea behind prezi.com.
 *
 *
 * Copyright 2011-2012 Bartek Szopka (@bartaz)
 *
 * Released under the MIT and GPL Licenses.
 *
 * ------------------------------------------------
 *  author:  Bartek Szopka
 *  version: 1.0.0-beta1
 *  url:     http://bartaz.github.com/impress.js/
 *  source:  http://github.com/bartaz/impress.js/
 * 
 *  minified using UglifyJS
 */
!function(e,t){"use strict";var n,i=function(){var t=e.createElement("dummy").style,n="Webkit Moz O ms Khtml".split(" "),i={};return function(e){if(void 0===i[e]){var r=e.charAt(0).toUpperCase()+e.substr(1),s=(e+" "+n.join(r+" ")+r).split(" ");i[e]=null;for(var o in s)if(void 0!==t[s[o]]){i[e]=s[o];break}}return i[e]}}(),r=function(e,t){var n,r;for(n in t)t.hasOwnProperty(n)&&null!==(r=i(n))&&(e.style[r]=t[n]);return e},s=function(e){return" translate3d("+e.x+"px,"+e.y+"px,"+e.z+"px) "},o=function(e,t){var n="",i=(e.order?e.order:"xyz").split("");t&&(i=i.reverse());for(var r=0;r<i.length;r++)n+=" rotate"+i[r].toUpperCase()+"("+e[i[r]]+"deg)";return n},a=function(e){return" scale("+e+") "},l=function(e){var n=t.innerHeight/e.height,i=t.innerWidth/e.width,r=n>i?i:n;return e.maxScale&&r>e.maxScale&&(r=e.maxScale),e.minScale&&r<e.minScale&&(r=e.minScale),r},d=e.body,u=null!==i("perspective")&&d.classList&&d.dataset;u||(d.className+=" impress-not-supported ");var c={},p=[],v=[],m=1024,f=768,g=1,h=0,y=1e3,b=1e3,E=function(){return!1},x=t.impress=function(i){if(!u)return{init:E,goto:E,prev:E,next:E,swipe:E,tear:E,lib:{}};if(i=i||"impress",c["impress-root-"+i])return c["impress-root-"+i];n=w(i),d.classList.remove("impress-not-supported"),d.classList.add("impress-supported");var p={},v=null,x=null,L=null,N=null,S=null,D=n.util.byId(i),z=e.createElement("div"),M=!1,T=null,I=function(e,t){var i=e.dataset,l={translate:{x:n.util.toNumber(i.x),y:n.util.toNumber(i.y),z:n.util.toNumber(i.z)},rotate:{x:n.util.toNumber(i.rotateX),y:n.util.toNumber(i.rotateY),z:n.util.toNumber(i.rotateZ||i.rotate),order:function(e,t){var n="xyz",i="";if("string"==typeof e)for(var r in e.split(""))n.indexOf(e[r]>=0)&&(i+=e[r],n=n.split(e[r]).join(""));return i||(void 0!==t?t:"xyz")}(i.rotateOrder)},scale:n.util.toNumber(i.scale,1),transitionDuration:n.util.toNumber(i.transitionDuration,N.transitionDuration),el:e};e.id||(e.id="step-"+(t+1)),p["impress-"+e.id]=l,r(e,{position:"absolute",transform:"translate(-50%,-50%)"+s(l.translate)+o(l.rotate)+a(l.scale),transformStyle:"preserve-3d"})},A=function(){(L=n.util.$$(".step",D)).forEach(I)},B=null,H=function(e,i,u,c){if(u=u||"goto",c=c||null,!M)return!1;if(A(),!(e=function(e){return"number"==typeof e?e=e<0?L[L.length+e]:L[e]:"string"==typeof e&&(e=n.util.byId(e)),e&&e.id&&p["impress-"+e.id]?e:null}(e)))return!1;t.scrollTo(0,0);var m=p["impress-"+e.id];if(i=void 0!==i?i:m.transitionDuration,v&&v!==e){var f={target:v,detail:{}};if(f.detail.next=e,f.detail.transitionDuration=i,f.detail.reason=u,c&&(f.origEvent=c),!1===C(f))return!1;e=f.detail.next,m=p["impress-"+e.id],i=f.detail.transitionDuration}v&&(v.classList.remove("active"),d.classList.remove("impress-on-"+v.id)),e.classList.add("active"),d.classList.add("impress-on-"+e.id);var g={rotate:{x:-m.rotate.x,y:-m.rotate.y,z:-m.rotate.z,order:m.rotate.order},translate:{x:-m.translate.x,y:-m.translate.y,z:-m.translate.z},scale:1/m.scale},h=g.scale>=x.scale,y=(i=n.util.toNumber(i,N.transitionDuration))/2;e===v&&(S=l(N));var b=g.scale*S;return v&&v!==e&&function(e,t){T===e&&(n.util.triggerEvent(e,"impress:stepleave",{next:t}),T=null)}(v,e),r(D,{perspective:N.perspective/b+"px",transform:a(b),transitionDuration:i+"ms",transitionDelay:(h?y:0)+"ms"}),r(z,{transform:o(g.rotate,!0)+s(g.translate),transitionDuration:i+"ms",transitionDelay:(h?0:y)+"ms"}),(x.scale===g.scale||x.rotate.x===g.rotate.x&&x.rotate.y===g.rotate.y&&x.rotate.z===g.rotate.z&&x.translate.x===g.translate.x&&x.translate.y===g.translate.y&&x.translate.z===g.translate.z)&&(y=0),x=g,v=e,t.clearTimeout(B),B=t.setTimeout(function(){!function(e){T!==e&&(n.util.triggerEvent(e,"impress:stepenter"),T=e),n.util.triggerEvent(e,"impress:steprefresh")}(v)},i+y),e},P=function(e,t,n){return e+(t-e)*n};return n.gc.addEventListener(D,"impress:init",function(){L.forEach(function(e){e.classList.add("future")}),n.gc.addEventListener(D,"impress:stepenter",function(e){e.target.classList.remove("past"),e.target.classList.remove("future"),e.target.classList.add("present")},!1),n.gc.addEventListener(D,"impress:stepleave",function(e){e.target.classList.remove("present"),e.target.classList.add("past")},!1)},!1),n.gc.addEventListener(D,"impress:init",function(){var e="";n.gc.addEventListener(D,"impress:stepenter",function(n){t.location.hash=e="#/"+n.target.id},!1),n.gc.addEventListener(t,"hashchange",function(){t.location.hash!==e&&H(n.util.getElementFromHash())},!1),H(n.util.getElementFromHash()||L[0],0)},!1),d.classList.add("impress-disabled"),c["impress-root-"+i]={init:function(){if(!M){k(D);var t=n.util.$("meta[name='viewport']")||e.createElement("meta");t.content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no",t.parentNode!==e.head&&(t.name="viewport",e.head.appendChild(t));var s=D.dataset;N={width:n.util.toNumber(s.width,m),height:n.util.toNumber(s.height,f),maxScale:n.util.toNumber(s.maxScale,g),minScale:n.util.toNumber(s.minScale,h),perspective:n.util.toNumber(s.perspective,y),transitionDuration:n.util.toNumber(s.transitionDuration,b)},S=l(N),n.util.arrayify(D.childNodes).forEach(function(e){z.appendChild(e)}),D.appendChild(z),e.documentElement.style.height="100%",r(d,{height:"100%",overflow:"hidden"});var o={position:"absolute",transformOrigin:"top left",transition:"all 0s ease-in-out",transformStyle:"preserve-3d"};r(D,o),r(D,{top:"50%",left:"50%",perspective:N.perspective/S+"px",transform:a(S)}),r(z,o),d.classList.remove("impress-disabled"),d.classList.add("impress-enabled"),A(),x={translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0,order:"xyz"},scale:1},M=!0,n.util.triggerEvent(D,"impress:init",{api:c["impress-root-"+i]})}},goto:H,next:function(e){var t=L.indexOf(v)+1;return t=t<L.length?L[t]:L[0],H(t,void 0,"next",e)},prev:function(e){var t=L.indexOf(v)-1;return t=t>=0?L[t]:L[L.length-1],H(t,void 0,"prev",e)},swipe:function(e){if(!(Math.abs(e)>1)){var t={target:v,detail:{}};t.detail.swipe=e,t.detail.transitionDuration=N.transitionDuration;var n;if(e<0)n=L.indexOf(v)+1,t.detail.next=n<L.length?L[n]:L[0],t.detail.reason="next";else{if(!(e>0))return;n=L.indexOf(v)-1,t.detail.next=n>=0?L[n]:L[L.length-1],t.detail.reason="prev"}if(!1===C(t))return!1;var i=t.detail.next,l=p["impress-"+i.id],d=l.scale*S,u=Math.abs(e),c={translate:{x:P(x.translate.x,-l.translate.x,u),y:P(x.translate.y,-l.translate.y,u),z:P(x.translate.z,-l.translate.z,u)},rotate:{x:P(x.rotate.x,-l.rotate.x,u),y:P(x.rotate.y,-l.rotate.y,u),z:P(x.rotate.z,-l.rotate.z,u),order:u<.7?x.rotate.order:l.rotate.order},scale:P(x.scale,d,u)};r(D,{perspective:N.perspective/c.scale+"px",transform:a(c.scale),transitionDuration:"0ms",transitionDelay:"0ms"}),r(z,{transform:o(c.rotate,!0)+s(c.translate),transitionDuration:"0ms",transitionDelay:"0ms"})}},tear:function(){n.gc.teardown(),delete c["impress-root-"+i]},lib:n}};x.supported=u;var L={};x.addLibraryFactory=function(e){for(var t in e)e.hasOwnProperty(t)&&(L[t]=e[t])};var w=function(e){var t={};for(var n in L)if(L.hasOwnProperty(n)){if(void 0!==t[n])throw"impress.js ERROR: Two libraries both tried to use libname: "+n;t[n]=L[n](e)}return t};x.addPreInitPlugin=function(e,t){if((t=parseInt(t)||10)<=0)throw"addPreInitPlugin: weight must be a positive integer";void 0===p[t]&&(p[t]=[]),p[t].push(e)};var k=function(e){for(var t=0;t<p.length;t++){var n=p[t];if(void 0!==n)for(var i=0;i<n.length;i++)n[i](e)}};x.addPreStepLeavePlugin=function(e,t){if((t=parseInt(t)||10)<=0)throw"addPreStepLeavePlugin: weight must be a positive integer";void 0===v[t]&&(v[t]=[]),v[t].push(e)};var C=function(e){for(var t=0;t<v.length;t++){var n=v[t];if(void 0!==n)for(var i=0;i<n.length;i++)if(!1===n[i](e))return!1}}}(document,window),function(e,t){"use strict";var n=[],i=0,r={roots:[]};window.impress.addLibraryFactory({gc:function(e){if(n[e])return n[e];var t=[],r=[],a=[];s(e);var l=function(e){t.push(e)},d=function(e,t,n){r.push({target:e,type:t,listener:n})},u=function(e){a.push(e)};u(function(e){o(e)});var c={pushElement:l,appendChild:function(e,t){e.appendChild(t),l(t)},pushEventListener:d,addEventListener:function(e,t,n){e.addEventListener(t,n),d(e,t,n)},pushCallback:u,teardown:function(){var n;for(n=a.length-1;n>=0;n--)a[n](e);for(a=[],n=0;n<t.length;n++)t[n].parentElement.removeChild(t[n]);for(t=[],n=0;n<r.length;n++){var i=r[n].target,s=r[n].type,o=r[n].listener;i.removeEventListener(s,o)}}};return n[e]=c,i++,c}});var s=function(t){r.roots[t]={},r.roots[t].steps=[];for(var n=e.getElementById(t).querySelectorAll(".step"),s=0;s<n.length;s++){var o=n[s];r.roots[t].steps.push({el:o,id:o.getAttribute("id")})}if(0===i){r.body={},e.body.classList.contains("impress-not-supported")?r.body.impressNotSupported=!0:r.body.impressNotSupported=!1;var a=e.head.querySelectorAll("meta");for(s=0;s<a.length;s++){var l=a[s];"viewport"===l.name&&(r.meta=l.content)}}},o=function(t){e.body.classList.remove("impress-enabled"),e.body.classList.remove("impress-disabled");var s=e.getElementById(t),o=s.querySelector(".active").id;e.body.classList.remove("impress-on-"+o),e.documentElement.style.height="",e.body.style.height="",e.body.style.overflow="";for(var a=s.querySelectorAll(".step"),l=0;l<a.length;l++)a[l].classList.remove("future"),a[l].classList.remove("past"),a[l].classList.remove("present"),a[l].classList.remove("active"),a[l].style.position="",a[l].style.transform="",a[l].style["transform-style"]="";s.style.position="",s.style["transform-origin"]="",s.style.transition="",s.style["transform-style"]="",s.style.top="",s.style.left="",s.style.transform="",a=r.roots[t].steps;for(var d;d=a.pop();)null===d.id?d.el.removeAttribute("id"):d.el.setAttribute("id",d.id);delete r.roots[t];var u=s.firstChild.innerHTML;if(s.innerHTML=u,void 0!==n[t]&&(delete n[t],i--),0===i){e.body.classList.remove("impress-supported"),r.body.impressNotSupported&&e.body.classList.add("impress-not-supported");var c=e.head.querySelectorAll("meta");for(l=0;l<c.length;l++){var p=c[l];"viewport"===p.name&&(void 0!==r.meta?p.content=r.meta:p.parentElement.removeChild(p))}}}}(document),function(e,t){"use strict";var n=[];t.impress.addLibraryFactory({util:function(i){if(n[i])return n[i];var r=function(e){return[].slice.call(e)},s=function(t){return e.getElementById(t)},o={$:function(t,n){return(n=n||e).querySelector(t)},$$:function(t,n){return n=n||e,r(n.querySelectorAll(t))},arrayify:r,byId:s,getElementFromHash:function(){return s(t.location.hash.replace(/^#\\/?/,""))},throttle:function(e,n){var i=null;return function(){var r=this,s=arguments;t.clearTimeout(i),i=t.setTimeout(function(){e.apply(r,s)},n)}},toNumber:function(e,t){return isNaN(e)?t||0:Number(e)},triggerEvent:function(t,n,i){var r=e.createEvent("CustomEvent");r.initCustomEvent(n,!0,!0,i),t.dispatchEvent(r)}};return n[i]=o,o}})}(document,window),function(e){"use strict";var t,n=0,i=0,r=null,s=null,o=null;e.addEventListener("impress:init",function(i){t=i.detail.api.lib.util,r=i.detail.api;var a=(o=i.target).dataset;a.autoplay&&(n=t.toNumber(a.autoplay,0));var l=e.querySelector("#impress-toolbar");l&&v(l),r.lib.gc.pushCallback(function(){clearTimeout(s)})},!1);var a=function(e){var r=e.target;i=t.toNumber(r.dataset.autoplay,n),l("paused"===d?0:i)};e.addEventListener("impress:stepenter",function(e){a(e)},!1),e.addEventListener("impress:substep:stepleaveaborted",function(e){a(e)},!1);var l=function(e){s&&clearTimeout(s),e>0&&(s=setTimeout(function(){r.next()},1e3*e)),p()},d="not clicked",u=null,c=function(){return i>0&&"paused"!==d?"||":"&#9654;"},p=function(){if(u){var e=u.offsetWidth,t=u.offsetHeight;u.innerHTML=c(),u.style.width||(u.style.width=e+"px"),u.style.height||(u.style.height=t+"px")}},v=function(t){var r='<button id="impress-autoplay-playpause" title="Autoplay" class="impress-autoplay">'+c()+"</button>";(u=function(t){var n=e.createElement("div");return n.innerHTML=t,n.firstChild}(r)).addEventListener("click",function(){"playing"===(d=i>0&&"paused"!==d?"paused":"playing")?(0===n&&(n=7),0===i&&(i=n),l(i)):"paused"===d&&l(0)}),function(t,n,i){var r=e.createEvent("CustomEvent");r.initCustomEvent(n,!0,!0,i),t.dispatchEvent(r)}(t,"impress:toolbar:appendChild",{group:10,element:u})}}(document),function(e){"use strict";var t=null,n=!1,i=function(e,t){var n,i;for(n in t)t.hasOwnProperty(n)&&null!==(i=r(n))&&(e.style[i]=t[n]);return e},r=function(){var t=e.createElement("dummy").style,n="Webkit Moz O ms Khtml".split(" "),i={};return function(e){if(void 0===i[e]){var r=e.charAt(0).toUpperCase()+e.substr(1),s=(e+" "+n.join(r+" ")+r).split(" ");i[e]=null;for(var o in s)if(void 0!==t[s[o]]){i[e]=s[o];break}}return i[e]}}(),s=function(){n&&(i(t,{display:"block"}),n=!1)};e.addEventListener("impress:init",function(r){var o=r.detail.api,a=r.target;t=a.firstElementChild;var l=o.lib.gc;l.addEventListener(e,"keydown",function(e){e.ctrlKey&&66===e.keyCode&&(e.preventDefault(),n?s():n?s():(i(t,{display:(n=!n)?"none":"block"}),n=!0))},!1),l.addEventListener(e,"keyup",function(e){e.ctrlKey&&66===e.keyCode&&e.preventDefault()},!1)},!1),e.addEventListener("impress:stepleave",function(){s()},!1)}(document),function(e,t){"use strict";impress.addPreInitPlugin(function(){if(t.markdown)for(var n=e.querySelectorAll(".markdown"),i=0;i<n.length;i++){var r=n[i],s=r.textContent.split(/^-----$/m),o=s.length-1;r.innerHTML=markdown.toHTML(s[o]);var a=null;for(r.id&&(a=r.id,r.id=""),o--;o>=0;){var l=r.cloneNode(!1);l.innerHTML=markdown.toHTML(s[o]),r.parentNode.insertBefore(l,r),r=l,o--}null!==a&&(r.id=a)}t.hljs&&hljs.initHighlightingOnLoad(),t.mermaid&&mermaid.initialize({startOnLoad:!0})},1)}(document,window),function(e){"use strict";e.addEventListener("impress:stepleave",function(){e.activeElement.blur()},!1)}(document),function(e,t){"use strict";var n;e.addEventListener("impress:init",function(e){n=e.detail.api.lib},!1);var i=function(e){return!isNaN(e)};impress.addPreStepLeavePlugin(function(r){if(r&&r.target){var s=r.target.dataset,o=e.querySelectorAll(".step");if(void 0!==s.gotoKeyList&&void 0!==s.gotoNextList&&void 0!==r.origEvent&&void 0!==r.origEvent.key){var a=s.gotoKeyList.split(" "),l=s.gotoNextList.split(" ");if(a.length!==l.length)t.console.log("impress goto plugin: data-goto-key-list and data-goto-next-list don't match:"),t.console.log(a),t.console.log(l);else{var d=a.indexOf(r.origEvent.key);if(d>=0){var u=l[d];if(i(u))return r.detail.next=o[u],void(r.detail.transitionDuration=n.util.toNumber(r.detail.next.dataset.transitionDuration,r.detail.transitionDuration));if((c=e.getElementById(u))&&c.classList.contains("step"))return r.detail.next=c,void(r.detail.transitionDuration=n.util.toNumber(r.detail.next.dataset.transitionDuration,r.detail.transitionDuration));t.console.log("impress goto plugin: "+u+" is not a step in this impress presentation.")}}}if(i(s.gotoNext)&&"next"===r.detail.reason)return r.detail.next=o[s.gotoNext],void(r.detail.transitionDuration=n.util.toNumber(r.detail.next.dataset.transitionDuration,r.detail.transitionDuration));if(s.gotoNext&&"next"===r.detail.reason){if((c=e.getElementById(s.gotoNext))&&c.classList.contains("step"))return r.detail.next=c,void(r.detail.transitionDuration=n.util.toNumber(r.detail.next.dataset.transitionDuration,r.detail.transitionDuration));t.console.log("impress goto plugin: "+s.gotoNext+" is not a step in this impress presentation.")}if(i(s.gotoPrev)&&"prev"===r.detail.reason)return r.detail.next=o[s.gotoPrev],void(r.detail.transitionDuration=n.util.toNumber(r.detail.next.dataset.transitionDuration,r.detail.transitionDuration));if(s.gotoPrev&&"prev"===r.detail.reason){if((c=e.getElementById(s.gotoPrev))&&c.classList.contains("step"))return r.detail.next=c,void(r.detail.transitionDuration=n.util.toNumber(r.detail.next.dataset.transitionDuration,r.detail.transitionDuration));t.console.log("impress goto plugin: "+s.gotoPrev+" is not a step in this impress presentation.")}if(i(s.goto))return r.detail.next=o[s.goto],void(r.detail.transitionDuration=n.util.toNumber(r.detail.next.dataset.transitionDuration,r.detail.transitionDuration));if(s.goto){var c=e.getElementById(s.goto);if(c&&c.classList.contains("step"))return r.detail.next=c,void(r.detail.transitionDuration=n.util.toNumber(r.detail.next.dataset.transitionDuration,r.detail.transitionDuration));t.console.log("impress goto plugin: "+s.goto+" is not a step in this impress presentation.")}}})}(document,window),function(e,t){"use strict";var n,i=[],r=function(){var t=e.getElementById("impress-help");if(t){var n=[];for(var r in i)for(var s in r)n.push(i[r][s]);n&&(t.innerHTML="<table>\n"+n.join("\n")+"</table>\n")}};e.addEventListener("keyup",function(i){"BODY"!==i.target.nodeName&&"HTML"!==i.target.nodeName||72===i.keyCode&&(i.preventDefault(),function(){var i=e.getElementById("impress-help");i&&("block"===i.style.display?i.style.display="none":(i.style.display="block",t.clearTimeout(n)))}())},!1),e.addEventListener("impress:help:add",function(e){var t=e.detail.row;"object"==typeof i[t]&&i[t].isArray||(i[t]=[]),i[e.detail.row].push("<tr><td><strong>"+e.detail.command+"</strong></td><td>"+e.detail.text+"</td></tr>"),r()}),e.addEventListener("impress:init",function(s){r();var o=e.getElementById("impress-help");if(o){o.style.display="block",n=t.setTimeout(function(){e.getElementById("impress-help").style.display="none"},7e3);s.detail.api.lib.gc.pushCallback(function(){t.clearTimeout(n),o.style.display="",o.innerHTML="",i=[]})}!function(t,n,i){var r=e.createEvent("CustomEvent");r.initCustomEvent(n,!0,!0,i),t.dispatchEvent(r)}(e,"impress:help:add",{command:"H",text:"Show this help",row:0})})}(document,window),function(e,t){"use strict";var n;switch(navigator.language){case"de":n={noNotes:'<div class="noNotes">Keine Notizen hierzu</div>',restart:"Neustart",clickToOpen:"Klicken um Sprecherkonsole zu öffnen",prev:"zurück",next:"weiter",loading:"initalisiere",ready:"Bereit",moving:"in Bewegung",useAMPM:!1};break;case"en":default:n={noNotes:'<div class="noNotes">No notes for this step</div>',restart:"Restart",clickToOpen:"Click to open speaker console",prev:"Prev",next:"Next",loading:"Loading",ready:"Ready",moving:"Moving",useAMPM:!1}}const i='<!DOCTYPE html><html id="impressconsole"><head>{{cssStyle}}{{cssLink}}</head><body><div id="console"><div id="views"><iframe id="slideView" scrolling="no"></iframe><iframe id="preView" scrolling="no"></iframe><div id="blocker"></div></div><div id="notes"></div></div><div id="controls"> <div id="prev"><a  href="#" onclick="impress().prev(); return false;" />{{prev}}</a></div><div id="next"><a  href="#" onclick="impress().next(); return false;" />{{next}}</a></div><div id="clock">--:--</div><div id="timer" onclick="timerReset()">00m 00s</div><div id="status">{{loading}}</div></div></body></html>';var r=void 0,s=void 0,o={},a=function(e){return(e<10?"0":"")+e},l=t.impressConsole=function(l){if(l=l||"impress",o[l])return o[l];var u=e.getElementById(l),c=null,p=function(){for(var t="",i=e.querySelector(".active");!i.nextElementSibling&&i.parentNode;)i=i.parentNode;for(i=i.nextElementSibling;i;){if((t=i.attributes.class)&&-1!==t.value.indexOf("step"))return c.document.getElementById("blocker").innerHTML=n.next,i;if(i.firstElementChild)i=i.firstElementChild;else{for(;!i.nextElementSibling&&i.parentNode;)i=i.parentNode;i=i.nextElementSibling}}return c.document.getElementById("blocker").innerHTML=n.restart,e.querySelector(".step")},v=function(){if(c){var t=e.querySelector(".active").querySelector(".notes");t=t?t.innerHTML:n.noNotes,c.document.getElementById("notes").innerHTML=t;var i=e.URL.substring(0,e.URL.search("#/")),r=i+"#"+e.querySelector(".active").id,s=i+"#"+p().id,o=c.document.getElementById("slideView");o.src!==r&&(o.src=r);var a=c.document.getElementById("preView");a.src!==s&&(a.src=s),c.document.getElementById("status").innerHTML='<span class="moving">'+n.moving+"</span>"}},m=function(){if(c){var t=e.querySelector(".active").querySelector(".notes");t=t?t.innerHTML:n.noNotes;var i=c.document.getElementById("notes");i.innerHTML=t,i.scrollTop=0;var r=e.URL.substring(0,e.URL.search("#/")),s=r+"#"+e.querySelector(".active").id,o=r+"#"+p().id,a=c.document.getElementById("slideView");a.src!==s&&(a.src=s);var l=c.document.getElementById("preView");l.src!==o&&(l.src=o),c.document.getElementById("status").innerHTML='<span  class="ready">'+n.ready+"</span>"}},f=function(e){c&&("next"===e.detail.reason&&g(),"prev"===e.detail.reason&&h())},g=function(){var e=c.document.getElementById("slideView");y(e,"impress:substep:show")},h=function(){var e=c.document.getElementById("slideView");y(e,"impress:substep:hide")},y=function(e,t,n){var i=e.contentDocument.createEvent("CustomEvent");i.initCustomEvent(t,!0,!0,n),e.contentDocument.dispatchEvent(i)},b=function(){var e=c.document.getElementById("notes");e.scrollTopMax-e.scrollTop>20?e.scrollTop=e.scrollTop+.8*e.clientHeight:t.impress().next()},E=function(){c.timerStart=new Date},x=function(e,t,n){void 0===n&&(n=c),n.document.addEventListener("keydown",function(t){t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||-1===e.indexOf(t.keyCode)||t.preventDefault()},!1),n.document.addEventListener("keyup",function(n){n.ctrlKey||n.altKey||n.shiftKey||n.metaKey||-1===e.indexOf(n.keyCode)||(t(),n.preventDefault())},!1)},L=function(){var e=c.document.getElementById("slideView"),t=c.document.getElementById("preView");e.contentDocument.body.classList.add("impress-console"),t.contentDocument.body.classList.add("impress-console"),void 0!==s&&(e.contentDocument.head.insertAdjacentHTML("beforeend",'<link rel="stylesheet" type="text/css" href="'+s+'">'),t.contentDocument.head.insertAdjacentHTML("beforeend",'<link rel="stylesheet" type="text/css" href="'+s+'">')),e.addEventListener("load",function(){e.contentDocument.body.classList.add("impress-console"),void 0!==s&&e.contentDocument.head.insertAdjacentHTML("beforeend",'<link rel="stylesheet" type="text/css" href="'+s+'">')}),t.addEventListener("load",function(){t.contentDocument.body.classList.add("impress-console"),void 0!==s&&t.contentDocument.head.insertAdjacentHTML("beforeend",'<link rel="stylesheet" type="text/css" href="'+s+'">')})},w=function(){if(!top.isconsoleWindow){if(!c||c.closed){if(null==(c=t.open("","impressConsole"))){var s=e.createElement("div");s.id="consoleWindowError",s.style.position="fixed",s.style.left=0,s.style.top=0,s.style.right=0,s.style.bottom=0,s.style.backgroundColor="rgba(255, 255, 255, 0.9)";return s.innerHTML='<button style="margin: 25vh 25vw;width:50vw;height:50vh;onclick="var x = document.getElementById(\'consoleWindowError\');x.parentNode.removeChild(x);impressConsole().open();">'+n.clickToOpen+"</button>",void e.body.appendChild(s)}var a="";return void 0!==r&&(a='<link rel="stylesheet" type="text/css" media="screen" href="'+r+'">'),c.document.open(),c.document.write(i.replace("{{cssStyle}}",d()).replace("{{cssLink}}",a).replace(/{{.*?}}/gi,function(e){return n[e.substring(2,e.length-2)]})),c.document.title="Speaker Console ("+e.title+")",c.impress=t.impress,c.isconsoleWindow=!0,c.onload=L,c.timerStart=new Date,c.timerReset=E,c.clockInterval=setInterval(o[l].clockTick,1e3),x([33,37,38],t.impress().prev),x([34,39,40],t.impress().next),x([32],b),x([82],E),c.onbeforeunload=function(){clearInterval(c.clockInterval)},m(),c.initialized=!1,c.document.close(),t.onresize=k,c.onresize=k,c}c.focus()}},k=function(){var e=c.document.getElementById("slideView"),n=c.document.getElementById("preView"),i=t.innerHeight/t.innerWidth,r=c.document.getElementById("views"),s=e.offsetWidth-e.clientWidth,o=r.clientWidth-s,a=Math.floor(o*i),l=a+4,d=Math.floor(.7*o),u=Math.floor(.7*a);r.clientHeight-s<l+u&&(u=r.clientHeight-s-l,d=Math.floor(u/i)),d<=Math.floor(.5*o)&&(o=r.clientWidth-s,l=(a=Math.floor((r.clientHeight-s-4)/1.5))+4,d=Math.floor(.5*o),u=r.clientHeight-s-l),e.style.width=o+"px",e.style.height=a+"px",n.style.top=l+"px",n.style.width=d+"px",n.style.height=u+"px"},C=function(e,n){void 0!==e?r=e:void 0!==u.dataset.consoleCss&&(r=u.dataset.consoleCss),void 0!==n?s=n:void 0!==u.dataset.consoleCssIframe&&(s=u.dataset.consoleCssIframe),u.addEventListener("impress:stepleave",v),u.addEventListener("impress:stepenter",m),u.addEventListener("impress:substep:stepleaveaborted",f),u.addEventListener("impress:substep:show",g),u.addEventListener("impress:substep:hide",h),t.onunload=function(){c&&!c.closed&&c.close()},x([80],w,t),"true"===u.dataset.consoleAutolaunch&&t.open()};return e.addEventListener("impress:init",function(){C(),function(t,n,i){var r=e.createEvent("CustomEvent");r.initCustomEvent(n,!0,!0,i),t.dispatchEvent(r)}(e,"impress:help:add",{command:"P",text:"Presenter console",row:10})}),u.addEventListener("impress:console:open",function(){t.open()}),u.addEventListener("impress:console:registerKeyEvent",function(e){x(e.detail.keyCodes,e.detail.handler,e.detail.window)}),o[l]={init:function(e,n){void 0!==e&&"css/impressConsole.css"!==e||void 0!==n&&"css/iframe.css"!==n||t.console.log("impressConsole.init() is deprecated. impressConsole is now initialized automatically when you call impress().init()."),C(e,n)},open:w,clockTick:function(){var e=new Date,t=e.getHours(),i=e.getMinutes(),r=e.getSeconds(),s="";n.useAMPM&&(s=t<12?"AM":"PM",t=0===(t=t>12?t-12:t)?12:t);var o=a(t)+":"+a(i)+":"+a(r)+" "+s;c.document.getElementById("clock").firstChild.nodeValue=o,r=Math.floor((e-c.timerStart)/1e3),i=Math.floor(r/60),r=Math.floor(r%60),c.document.getElementById("timer").firstChild.nodeValue=a(i)+"m "+a(r)+"s",c.initialized||(c.document.getElementById("slideView").contentWindow.scrollTo(0,0),c.document.getElementById("preView").contentWindow.scrollTo(0,0),c.initialized=!0)},registerKeyEvent:x},o[l]},d=function(){return"<style>\n            #impressconsole body {\n                background-color: rgb(255, 255, 255);\n                padding: 0;\n                margin: 0;\n                font-family: verdana, arial, sans-serif;\n                font-size: 2vw;\n            }\n\n            #impressconsole div#console {\n                position: absolute;\n                top: 0.5vw;\n                left: 0.5vw;\n                right: 0.5vw;\n                bottom: 3vw;\n                margin: 0;\n            }\n\n            #impressconsole div#views, #impressconsole div#notes {\n                position: absolute;\n                top: 0;\n                bottom: 0;\n            }\n\n            #impressconsole div#views {\n                left: 0;\n                right: 50vw;\n                overflow: hidden;\n            }\n\n            #impressconsole div#blocker {\n                position: absolute;\n                right: 0;\n                bottom: 0;\n            }\n\n            #impressconsole div#notes {\n                left: 50vw;\n                right: 0;\n                overflow-x: hidden;\n                overflow-y: auto;\n                padding: 0.3ex;\n                background-color: rgb(255, 255, 255);\n                border: solid 1px rgb(120, 120, 120);\n            }\n\n            #impressconsole div#notes .noNotes {\n                color: rgb(200, 200, 200);\n            }\n\n            #impressconsole div#notes p {\n                margin-top: 0;\n            }\n\n            #impressconsole iframe {\n                position: absolute;\n                margin: 0;\n                padding: 0;\n                left: 0;\n                border: solid 1px rgb(120, 120, 120);\n            }\n\n            #impressconsole iframe#slideView {\n                top: 0;\n                width: 49vw;\n                height: 49vh;\n            }\n\n            #impressconsole iframe#preView {\n                opacity: 0.7;\n                top: 50vh;\n                width: 30vw;\n                height: 30vh;\n            }\n\n            #impressconsole div#controls {\n                margin: 0;\n                position: absolute;\n                bottom: 0.25vw;\n                left: 0.5vw;\n                right: 0.5vw;\n                height: 2.5vw;\n                background-color: rgb(255, 255, 255);\n                background-color: rgba(255, 255, 255, 0.6);\n            }\n\n            #impressconsole div#prev, div#next {\n            }\n\n            #impressconsole div#prev a, #impressconsole div#next a {\n                display: block;\n                border: solid 1px rgb(70, 70, 70);\n                border-radius: 0.5vw;\n                font-size: 1.5vw;\n                padding: 0.25vw;\n                text-decoration: none;\n                background-color: rgb(220, 220, 220);\n                color: rgb(0, 0, 0);\n            }\n\n            #impressconsole div#prev a:hover, #impressconsole div#next a:hover {\n                background-color: rgb(245, 245, 245);\n            }\n\n            #impressconsole div#prev {\n                float: left;\n            }\n\n            #impressconsole div#next {\n                float: right;\n            }\n\n            #impressconsole div#status {\n                margin-left: 2em;\n                margin-right: 2em;\n                text-align: center;\n                float: right;\n            }\n\n            #impressconsole div#clock {\n                margin-left: 2em;\n                margin-right: 2em;\n                text-align: center;\n                float: left;\n            }\n\n            #impressconsole div#timer {\n                margin-left: 2em;\n                margin-right: 2em;\n                text-align: center;\n                float: left;\n            }\n\n            #impressconsole span.moving {\n                color: rgb(255, 0, 0);\n            }\n\n            #impressconsole span.ready {\n                color: rgb(0, 128, 0);\n            }\n        </style>"};l()}(document,window),function(e){"use strict";e.addEventListener("impress:init",function(t){var n=e.body;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&n.classList.add("impress-mobile");t.detail.api.lib.gc.pushCallback(function(){e.body.classList.remove("impress-mobile");var t=e.getElementsByClassName("prev")[0],n=e.getElementsByClassName("next")[0];void 0!==t&&t.classList.remove("prev"),void 0!==n&&n.classList.remove("next")})}),e.addEventListener("impress:stepenter",function(t){var n=e.getElementsByClassName("prev")[0],i=e.getElementsByClassName("next")[0];(function(t){for(var n=e.querySelectorAll(".step"),i=n.length-1;i>=0;i--)if(n[i]===t)return i-1>=0?n[i-1]:n[n.length-1]})(t.target).classList.add("prev");(function(t){for(var n=e.querySelectorAll(".step"),i=0;i<n.length;i++)if(n[i]===t)return i+1<n.length?n[i+1]:n[0]})(t.target).classList.add("next"),void 0!==n&&n.classList.remove("prev"),void 0!==i&&i.classList.remove("next")})}(document),function(e,t){"use strict";var n,i=function(){e.body.classList.add("impress-mouse-timeout")},r=function(){n&&t.clearTimeout(n),e.body.classList.remove("impress-mouse-timeout"),n=t.setTimeout(i,3e3)};e.addEventListener("impress:init",function(i){var s=i.detail.api.lib.gc;s.addEventListener(e,"mousemove",r),s.addEventListener(e,"click",r),s.addEventListener(e,"touch",r),r(),s.pushCallback(function(){t.clearTimeout(n),e.body.classList.remove("impress-mouse-timeout")})},!1)}(document,window),function(e){"use strict";e.addEventListener("impress:init",function(t){var n=t.detail.api,i=n.lib.gc,r=n.lib.util,s=function(e){return!(e.altKey||e.ctrlKey||e.metaKey)&&(9===e.keyCode||!e.shiftKey&&(("BODY"===e.target.nodeName||"HTML"===e.target.nodeName)&&(e.keyCode>=32&&e.keyCode<=34||e.keyCode>=37&&e.keyCode<=40||void 0)))};i.addEventListener(e,"keydown",function(e){s(e)&&e.preventDefault()},!1),i.addEventListener(e,"keyup",function(e){if(s(e)){if(e.shiftKey)switch(e.keyCode){case 9:n.prev()}else switch(e.keyCode){case 33:case 37:case 38:n.prev(e);break;case 9:case 32:case 34:case 39:case 40:n.next(e)}e.preventDefault()}},!1),i.addEventListener(e,"click",function(t){for(var i=t.target;"A"!==i.tagName&&i!==e.documentElement;)i=i.parentNode;if("A"===i.tagName){var r=i.getAttribute("href");r&&"#"===r[0]&&(i=e.getElementById(r.slice(1)))}n.goto(i)&&(t.stopImmediatePropagation(),t.preventDefault())},!1),i.addEventListener(e,"click",function(t){for(var i=t.target;(!i.classList.contains("step")||i.classList.contains("active"))&&i!==e.documentElement;)i=i.parentNode;n.goto(i)&&t.preventDefault()},!1),r.triggerEvent(e,"impress:help:add",{command:"Left &amp; Right",text:"Previous &amp; Next step",row:1})},!1)}(document),function(e){"use strict";var t,n,i,r,s,o,a,l=[],d=function(t,n,i){var r=e.createEvent("CustomEvent");r.initCustomEvent(n,!0,!0,i),t.dispatchEvent(r)},u=function(t){var n=e.createElement("div");return n.innerHTML=t,n.firstChild},c=function(){for(var e="",t=0;t<r.length;t++)l.indexOf(r[t])<0&&(e=e+'<option value="'+r[t].id+'">'+r[t].id+"</option>\n");return e};e.addEventListener("impress:navigation-ui:hideStep",function(e){l.push(e.target),o&&(o.innerHTML=c())},!1),e.addEventListener("impress:init",function(l){(t=e.querySelector("#impress-toolbar"))&&function(e){var l=(n=e.detail.api).lib.gc;i=e.target,r=i.querySelectorAll(".step");var p='<select id="impress-navigation-ui-select" title="Go to" class="impress-navigation-ui">\n'+c()+"</select>";(s=u('<button id="impress-navigation-ui-prev" title="Previous" class="impress-navigation-ui">&lt;</button>')).addEventListener("click",function(){n.prev()}),(o=u(p)).addEventListener("change",function(e){n.goto(e.target.value)}),l.addEventListener(i,"impress:steprefresh",function(e){r=i.querySelectorAll(".step"),o.innerHTML="\n"+c(),o.value=e.target.id}),(a=u('<button id="impress-navigation-ui-next" title="Next" class="impress-navigation-ui">&gt;</button>')).addEventListener("click",function(){n.next()}),d(t,"impress:toolbar:appendChild",{group:0,element:s}),d(t,"impress:toolbar:appendChild",{group:0,element:o}),d(t,"impress:toolbar:appendChild",{group:0,element:a})}(l)},!1)}(document),function(e){"use strict";function t(e){var t=i.indexOf(e);if(null!==s){var n=100/(i.length-1)*t;s.style.width=n.toFixed(2)+"%"}null!==o&&(o.innerHTML=t+"/"+(i.length-1))}var n,i=[],r=function(){i=[];for(var e=n.querySelectorAll(".step"),t=0;t<e.length;t++)i[t+1]=e[t].id};e.addEventListener("impress:init",function(e){n=e.target,r();e.detail.api.lib.gc.pushCallback(function(){i=[],s&&(s.style.width=""),o&&(o.innerHTML="")})});var s=e.querySelector("div.impress-progressbar div"),o=e.querySelector("div.impress-progress");null===s&&null===o||(e.addEventListener("impress:stepleave",function(e){t(e.detail.next.id)}),e.addEventListener("impress:steprefresh",function(e){r(),t(e.target.id)}))}(document),function(e,t){"use strict";var n={},i=function(e,t){return isNaN(e)?t||0:Number(e)},r=function(e,n){if("string"!=typeof e)return i(e,n);var r=e.match(/^([+-]*[\d\.]+)([wh])$/);if(null==r)return i(e,n);return parseFloat(r[1])*("w"===r[2]?t.innerWidth:t.innerHeight)},s=function(e,t){var n=e.dataset;t||(t={x:0,y:0,z:0,relative:{x:0,y:0,z:0}});var s={x:i(n.x,t.x),y:i(n.y,t.y),z:i(n.z,t.z),relative:{x:r(n.relX,t.relative.x),y:r(n.relY,t.relative.y),z:r(n.relZ,t.relative.z)}};return void 0!==n.x&&(s.relative.x=0),void 0!==n.y&&(s.relative.y=0),void 0!==n.z&&(s.relative.z=0),s.x=s.x+s.relative.x,s.y=s.y+s.relative.y,s.z=s.z+s.relative.z,s};t.impress.addPreInitPlugin(function(e){var t,i=e.querySelectorAll(".step");n[e.id]=[];for(var r=0;r<i.length;r++){var o=i[r];n[e.id].push({el:o,x:o.getAttribute("data-x"),y:o.getAttribute("data-y"),z:o.getAttribute("data-z")});var a=s(o,t);o.setAttribute("data-x",a.x),o.setAttribute("data-y",a.y),o.setAttribute("data-z",a.z),t=a}}),e.addEventListener("impress:init",function(e){var t=e.target;e.detail.api.lib.gc.pushCallback(function(){for(var e,i=n[t.id];e=i.pop();)null===e.x?e.el.removeAttribute("data-x"):e.el.setAttribute("data-x",e.x),null===e.y?e.el.removeAttribute("data-y"):e.el.setAttribute("data-y",e.y),null===e.z?e.el.removeAttribute("data-z"):e.el.setAttribute("data-z",e.z);delete n[t.id]})},!1)}(document,window),function(e,t){"use strict";e.addEventListener("impress:init",function(n){var i=n.detail.api;i.lib.gc.addEventListener(t,"resize",i.lib.util.throttle(function(){i.goto(e.querySelector(".step.active"),500)},250),!1)},!1)}(document,window),function(e,t){"use strict";var n;e.addEventListener("impress:init",function(e){n=e.detail.api.lib.util},!1);var i=function(t){t&&t.target&&t.detail.next.classList.contains("skip")&&("next"===t.detail.reason?(t.detail.next=function(t){for(var n=e.querySelectorAll(".step"),i=0;i<n.length;i++)if(n[i]===t)return i+1<n.length?n[i+1]:n[0]}(t.detail.next),i(t)):"prev"===t.detail.reason&&(t.detail.next=function(t){for(var n=e.querySelectorAll(".step"),i=n.length-1;i>=0;i--)if(n[i]===t)return i-1>=0?n[i-1]:n[n.length-1]}(t.detail.next),i(t)),t.detail.transitionDuration=n.toNumber(t.detail.next.dataset.transitionDuration,t.detail.transitionDuration))};t.impress.addPreStepLeavePlugin(i,1)}(document,window),function(e,t){"use strict";window.impress.addPreStepLeavePlugin(function(e){if(e&&e.target)return(!e.target.classList.contains("stop")||"next"!==e.detail.reason)&&void 0},2)}(document),function(e,t){"use strict";var n=function(t,n,i){var r=e.createEvent("CustomEvent");r.initCustomEvent(n,!0,!0,i),t.dispatchEvent(r)},i=null;e.addEventListener("impress:stepenter",function(e){i=e.target},!1);var r=function(e){var t=e.querySelectorAll(".substep"),n=e.querySelectorAll(".substep-visible");if(t.length>0)return s(t,n)},s=function(e,t){if(t.length<e.length){var n=e[t.length];return n.classList.add("substep-visible"),n}},o=function(e){var t=e.querySelectorAll(".substep"),n=e.querySelectorAll(".substep-visible");if(t.length>0)return a(n)},a=function(e){if(e.length>0){var t=e[e.length-1];return t.classList.remove("substep-visible"),t}};t.impress.addPreStepLeavePlugin(function(e){if(e&&e.target){var t,i=e.target;return"next"===e.detail.reason&&(t=r(i))?(n(i,"impress:substep:stepleaveaborted",{reason:"next",substep:t}),!1):"prev"===e.detail.reason&&(t=o(i))?(n(i,"impress:substep:stepleaveaborted",{reason:"prev",substep:t}),!1):void 0}},1),e.addEventListener("impress:stepenter",function(e){for(var t=e.target.querySelectorAll(".substep-visible"),n=0;n<t.length;n++)t[n].classList.remove("substep-visible")},!1),e.addEventListener("impress:substep:show",function(){r(i)},!1),e.addEventListener("impress:substep:hide",function(){o(i)},!1)}(document,window),function(e,t){"use strict";var n=0,i=0,r=0,s=t.innerWidth/20;e.addEventListener("touchstart",function(e){i=n=e.touches[0].clientX}),e.addEventListener("touchmove",function(e){var s=e.touches[0].clientX,o=s-n;r=i-s,i=s,t.impress().swipe(o/t.innerWidth)}),e.addEventListener("touchend",function(){var o=i-n;Math.abs(o)>t.innerWidth/5&&o*r<=0?o>t.innerWidth/5&&r<=0?t.impress().prev():o<-t.innerWidth/5&&r>=0&&t.impress().next():Math.abs(r)>s?r<-s?t.impress().prev():r>s&&t.impress().next():t.impress().goto(e.querySelector("#impress .step.active"))}),e.addEventListener("touchcancel",function(){t.impress().goto(e.querySelector("#impress .step.active"))})}(document,window),function(e){"use strict";var t=e.getElementById("impress-toolbar"),n=[],i=function(e){for(var t=e+1;!n[t]&&t<n.length;)t++;if(t<n.length)return t};t&&(t.addEventListener("impress:toolbar:appendChild",function(r){(function(r){var s="impress-toolbar-group-"+r;if(!n[r]){n[r]=e.createElement("span"),n[r].id=s;var o=i(r);void 0===o?t.appendChild(n[r]):t.insertBefore(n[r],n[o])}return n[r]})(r.detail.group).appendChild(r.detail.element)}),t.addEventListener("impress:toolbar:insertBefore",function(e){t.insertBefore(e.detail.element,e.detail.before)}),t.addEventListener("impress:toolbar:removeWidget",function(e){t.removeChild(e.detail.remove)}),e.addEventListener("impress:init",function(e){e.detail.api.lib.gc.pushCallback(function(){t.innerHTML="",n=[]})}))}(document);
</script>-->
<script src="https://cdn.rawgit.com/impress/impress.js/master/js/impress.js"></script>
<script>impress().init();</script>
</body>
</html>
`;
